---
title: "物件傳參考"
tag: 
- 
---
# 物件傳參考
> ### 備註
> 找資料的時候看到很多種說法，可能要留意一下是不是在講同件事XD
> 傳參照、傳參、call by reference、pass by reference


## 傳？傳什麼？
- [五分鐘快速了解 [傳址，傳參考，傳址] ](https://ithelp.ithome.com.tw/articles/10198215)
- [JS 的傳值 & 傳參考](https://ithelp.ithome.com.tw/articles/10225762)
- [這篇還沒看](https://ithelp.ithome.com.tw/articles/10209104)

### 參考是什麼？
參考（參照、reference） ，指的是他們存在的**記憶體空間**
傳參考會共用同一個記憶體空間，不會複製

### JS 的傳值與傳參考
|傳什麼|動作|舉例|特性|
|-|-|-|-|
|傳值|Copy|[[原始資料類型 Primitive Data Types]]|複製過後，兩者並沒有關連|
|傳參考|Link|物件型別([[Object]], [[Array]], [[Function]])|複製過後，其中一方被修改，兩方都會更新|


#### 傳值 Call By Value
- 把 value 傳到另一個**記憶體位置**的 value 上，是 copy 非 link 
- JS 中的純值（[[原始資料類型 Primitive Data Types]]）就是這個特性(Boolean、Null、Undefined、Number、String)
- 彼此只有 copy 關係，所以 copy 完後，其中一方被更改，不會影響到另一方
#### 傳參考 Call By Reference
- 把記憶位置傳到另一個物件的記憶體位置上，為 link 非 copy
- JS 中物件型別是這個特性
- 彼此有 link 關係，所以在哪裡其中一方被修改了，兩邊都會更新


## Object 的傳參考特性
不論物件、陣列都是用傳參考方式賦值，
賦值後彼此有 link 關係，其中一方被更改，兩方都會一起更新

有個 person 物件
```js
const person = {
  name: '小明',
  obj: {}
}
```
person2 與 person 建立了一個 link 關係
在 person2 裡不論更改 key， 或是內部 obj 的 key 都會更新原本資料
```js
const person2 = person;  // link 了一個 person2 物件
person2.name = '杰倫';   // 在 person2 更新這個物件內容
person.name = person2.name = '杰倫';  // 兩邊都會自動更新
```
### object 在 object 內部也一樣擁有傳參考特性
再額外建立一個 obj2 跟 obj 建立 link 關係（還不知道為什麼要這麼做）
直接打 person2.obj.{key} 也會更新 person.obj
```js
const obj2 = obj // 建立新的 link
```

## Danger Zone
### 透過 function 修改 object 的 key （不清楚自己在幹嘛不要亂用）
有個 funciton 專門修改 object 的某個 key
```js
const fn = (item) => {
  item.name = '杰倫';
}
```
不論這個 function 帶入 person, person2 都會被更新
```js
fn(person2);   // 透過這個 function 去修改 person2（跟 person 有 link 相關）
console.log(person);  // 物件傳參考特性， person 也會被更新
```


## [[物件不要傳參考的時候：深層、淺層拷貝]]
#js #vue #object #advanceJs 